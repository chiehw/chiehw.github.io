---
title: Vite 如何使用环境变量？
categories: 程序人生
abbrlink: 730a2fb8
date: 2023-10-31 22:20:39
tags:
---

- 在组件中，有一个特殊的 `import.meta.env` 对象可以获取 env 中的环境变量。
  - 判断当前是开发还是生产：import.meta.env.MODE === 'development'
- 根据环境加载环境变量。https://cn.vitejs.dev/config/#using-environment-variables-in-config
  - 可以用于自动配置 target

```ts
import { defineConfig, loadEnv } from 'vite'

export default defineConfig(({ command, mode }) => {
  // 根据当前工作目录中的 `mode` 加载 .env 文件
  // 设置第三个参数为 '' 来加载所有环境变量，而不管是否有 `VITE_` 前缀。
  const env = loadEnv(mode, process.cwd(), '')
  return {
    // vite 配置
    define: {
    // 定义变量
      __APP_ENV__: JSON.stringify(env.APP_ENV),
    },
  }
})

```

