---
title: ElementUI表格如何实现只选择1条记录
categories: 编程杂货铺
abbrlink: b78372a1
date: 2023-11-05 05:08:07
tags:
---

ElementUI 的 table 内部有个 selection 变量用于存储已经选中的元素，toggleRowSelection 可以改变选中状态。

```ts
const toggleRowSelection = (
    row: T,
    selected = undefined,
    emitChange = true
  ) => {
    const changed = toggleRowStatus(selection.value, row, selected)
    if (changed) {
      const newSelection = (selection.value || []).slice()
      // 调用 API 修改选中值，不触发 select 事件
      if (emitChange) {
        instance.emit('select', newSelection, row)
      }
      instance.emit('selection-change', newSelection)
    }
  }
```

- 可以考虑先拿到 table 的 ref，绑定选中事件。

```html
<el-table ref="tableRef" @select="handleSelectionChange" >
```

- 如果超过1条就取消这条的选中，使用 toggleRowSelection 接口来更新

```js
const handleSelectionChange = (selection, row) => {
    if (selection.length > 1) {
        ElMessage.warning('只能选择一条数据');
        tableRef.value.toggleRowSelection(row); // 取消选中
        return
    }
};
```

