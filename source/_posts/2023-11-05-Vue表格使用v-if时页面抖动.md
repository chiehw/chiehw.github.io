---
title: Vue表格使用v-if时页面抖动
date: 2023-11-05 05:06:01
categories: 程序人生
tags:
---

# 表格变化时不会闪烁



## 01 为什么 element-table-column 不能用 v-show？

v-show 用 display: none 来控制显示，但是在编译完成之后，这个节点并不存在了，样式就会无效。

> 在编译之后，并没有 column，所以在 column 上使用 v-show 肯定不行。

解决办法：v-if。

PS：网上好多文章都说 display: table-cell 的优先级高 = =。

## 02 为什么会发生页面抖动？

Vue 使用 Diff 算法可以实现对节点的复用，只有当 key 发生改变的时候，才会触发节点的重新渲染，否则 Vue 将会复用之前的节点，通过改变节点的属性实现更新。

```html
<el-table :key='Math.random()'></el-table>
```

每次页面刷新的时候，都会更新 key，从而实现刷新整个 Table。

## 03 什么是v-cloak？

v-cloak 用于隐藏尚未完成的编译 DOM 模版（**该指令只在没有构建环境的情况需要使用**）。

当使用 DOM 书写模版时，可能会出现一种叫做“未编译模版闪现”的情况：用户先看到还没编译完成的大括号标签，直到挂载组件时才将它们替换为实际渲染的内容。

v-cloak 会保留在所绑定的元素上，直到相关组件实例被挂载后才移除。其原理类似 v-show：

```css
[v-cloak] {
    display: none
}
```

## 参考

1. 【Weex开发】解决组件用v-if显示时出现的抖动问题：https://www.jianshu.com/p/076d759c7f47
