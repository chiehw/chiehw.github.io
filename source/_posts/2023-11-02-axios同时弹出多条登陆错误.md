---
title: axios同时弹出多条登陆错误提醒
date: 2023-11-02 00:21:27
categories: 程序人生
tags:
---

- 自定义 axios 的 http 响应拦截器

```js
let timer = null;
// 配置响应拦截器
service.interceptors.response.use(response => {
    store.commit("setShowloading", false);
    return response;
}, error => {
  	// 300ms以内，如果同时有多条消息，前面的消息将会被清空，仅保留最后一条
    if (timer) clearTimeout(timer);
    // 设置定时器
    timer = setTimeout(() => {
        ElMessage.error(error.response?.data?.msg)
        timer = null;
    }, 300);
    return Promise.reject(error);
})
```