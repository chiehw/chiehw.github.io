---
title: 如何自动引入axios
categories: 程序人生
abbrlink: 4c375ea4
date: 2023-11-02 00:20:29
tags:
---

## 01 如何自动引入axios

- npm i -D unplugin-auto-import

- 在 vite.config.ts 中配置
  ```ts
  AutoImport({
      imports: [
        'vue',
        'vue-router',
        { '@/view/requests': [['default', 'axios']] },
      ],
      eslintrc: {
        enabled: false, // Default `false`
        filepath: './.eslintrc-auto-import.json', // Default `./.eslintrc-auto-import.json`
        globalsPropValue: true, // Default `true`, (true | false | 'readonly' | 'readable' | 'writable' | 'writeable')
      },
      // template 中可用
      vueTemplate: true,
    }),
  ```
  
  
  
- ts.config.json文件引入声明文件: include中引入 auto-imports.d.ts

## 02 unplugin-auto-import 原理是什么？

unplugin-auto-import 库基于 unimport 库，unimport 库基于 unplugin 库。unplugin 提供了统一的插件接口、unimport 提供了 import 的接口（自动 import）。

- 将 Vue 源码转换为 JS 
- 判断是否引入包：根据 _resolveComponent 函数的参数来判断。
- 使用自动生成的变量替换（使用了@ampproject/remapping 来完成 sourceMap 的合成）。

## 03 全局组件和按需引入

- Components
  - globalComponents：全局引入。进度条、空布局、表单/表格经常用到的组件可以设置为全局引入。
  - localComponents：局部组件，按需引入。

## 参考

1. vue3中使用axios：https://www.cnblogs.com/lovewhatIlove/p/17232427.html
1. unplugin-vue-components 源码原理分析：https://blog.csdn.net/Liu_yunzhao/article/details/130181440