---
title: This 的指向
date: 2023-11-11 18:05:27
categories: 编程
tags:
---

## 01 普通函数 this 指向哪里？

核心：函数在执行时，会在函数内部自动生成一个 this 指针，谁直接调用**产生这个 this 指针的函数**。this 就指向谁。

>  **谁直接调用产生 this 指针的函数，这函数里的 this 指针就指向谁。**

## 02 实例化对象的函数指向？

```js
obj.say()
```

当 obj.say 被调用的时候，此时 this 指向的是 obj 这个对象（因为 say 函数是通过 obj 这个对象直接调用的）。obj 这个对象包含在 window 对象里。

## 03 案例1

```js
var bj=10;
var obj={
    name:"八戒",
    age:500,
    say:function(){
        console.log(this);//就是obj这个对象
        console.log(this.bj);//undefined
        console.log(this.name)//八戒
        function wk(){
            console.log(this);//window
            console.log(this.bj);//10
            console.log(this.name);//这里显示的是为空
        }
        wk();        
    },
}
obj.say();
```

其中 wk 没有通过 say 来调用，而是自执行，该函数的 this 指向 window。

## 04 案例2

```js
var bj=10;
var obj={
    name:"八戒",
    age:"500",
    say:function(){
        var bj=40;
        console.log(this);//window
        console.log(this.bj);//10
        console.log(this.name);//这里没有输出内容
    }
}
var elseObj=obj.say;
elseObj();
```

elseObj 只是一个函数，this 的指针并不明确，当直接调用 elseObj 的时候，相当于通过 window 直接调用。

## 05 回调函数的指向？

```js
var obj = {
    a: 10,
    getA: function(){
        console.log(this.a);
    }
}
active(obj.getA);
function active(fn) {
    console.log(fn === obj.getA ) // true
    fn();
}
```

回调函数的 this，取决于执行回调函数的上下文。

1. 定时器 setTimeout 的回调函数里的 this 指向 window。



## 参考

1. 深入理解JS函数中this指针的指向：https://www.cnblogs.com/zjjDaily/p/9482958.html